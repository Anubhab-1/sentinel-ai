{% extends "base.html" %}

{% block title %}Scan Comparison | Sentinel-AI{% endblock %}

{% block content %}
<div class="bg-grid-pattern"></div>
<div class="bg-glow-orb" style="top: 0; right: 0; opacity: 0.3;"></div>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10">

    <!-- Header -->
    <div class="flex flex-col md:flex-row items-center justify-between mb-12 fade-in">
        <div>
            <h1 class="text-4xl font-bold font-heading text-white mb-2">Scan Analysis</h1>
            <p class="text-gray-400 font-mono text-sm">COMPARISON_PROTOCOL // {{ url }}</p>
        </div>
        <a href="{{ url_for('history') }}"
            class="btn-cyber px-6 py-2 rounded mt-4 md:mt-0 flex items-center gap-2 group">
            <svg class="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18">
                </path>
            </svg>
            Back to History
        </a>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 fade-in">
        <!-- Previous Scan -->
        <div class="glass-card">
            <div class="text-sm font-mono text-gray-400 uppercase tracking-wider mb-2">Previous Check</div>
            <div class="text-4xl font-bold text-white mb-1">{{ previous['risk_score'] }}<span
                    class="text-lg text-gray-500">/100</span></div>
            <div class="text-xs text-gray-400">{{ previous['created_at'] }}</div>
        </div>

        <!-- Latest Scan -->
        <div class="glass-card border-primary/30">
            <div class="text-sm font-mono text-primary uppercase tracking-wider mb-2">Latest Check</div>
            <div class="text-4xl font-bold text-white mb-1">{{ latest['risk_score'] }}<span
                    class="text-lg text-gray-500">/100</span></div>
            <div class="text-xs text-primary/70">{{ latest['created_at'] }}</div>
        </div>

        <!-- Delta -->
        <div class="glass-card flex flex-col justify-center items-center text-center">
            <div class="text-sm font-mono text-gray-400 uppercase tracking-wider mb-2">Risk Variance</div>
            <div class="text-5xl font-bold mb-2
                {% if diff > 0 %} text-red-500
                {% elif diff < 0 %} text-green-500
                {% else %} text-gray-500 {% endif %}">
                {% if diff > 0 %} +{{ diff }}
                {% elif diff < 0 %} {{ diff }} {% else %} - {% endif %} </div>
                    <div class="text-xs font-mono uppercase tracking-widest
                {% if diff > 0 %} text-red-400
                {% elif diff < 0 %} text-green-400
                {% else %} text-gray-400 {% endif %}">
                        {% if diff > 0 %} Security Degraded
                        {% elif diff < 0 %} Security Improved {% else %} No Change {% endif %} </div>
                    </div>
            </div>

        </div>
        {% endblock %}